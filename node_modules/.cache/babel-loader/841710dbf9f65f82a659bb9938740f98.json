{"ast":null,"code":"import _slicedToArray from\"/home/bela/TPL/frontend-challenges/js/03_react/weather/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var LocationBar=function LocationBar(_ref){var _cities$results;var setLocationInput=_ref.setLocationInput,cities=_ref.cities,setCurrentCoords=_ref.setCurrentCoords,setCity=_ref.setCity;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),input=_useState2[0],setInput=_useState2[1];var onChange=function onChange(event){setInput(event.currentTarget.value);};function onKeyDown(event){if(event.key===\"Enter\"&&cities!==null&&cities!==void 0&&cities.results){var inputArray=input.split(\",\");var admin3=inputArray[inputArray.length-1].trim();var _city=cities.results.find(function(city){return city.admin3===admin3;});if(!_city)_city=cities.results[0];changeCoords(_city);}}function changeCoords(city){var lat=city.latitude.toString();var lng=city.longitude.toString();var coords=[lat,lng];console.log(coords,city.name,city.admin3);setCurrentCoords(coords);setCity(city.name);}useEffect(function(){setLocationInput(input.replaceAll(\" \",\"%20\"));},[input,setLocationInput]);var options=new Array();cities===null||cities===void 0?void 0:(_cities$results=cities.results)===null||_cities$results===void 0?void 0:_cities$results.forEach(function(city){var id=city.id;var name=city.name;var country=city.country;var admin1=city.admin1;var admin3=city.admin3!==undefined?city.admin3:\"\";options.push({id:id,name:name,country:country,admin1:admin1,admin3:admin3});});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"datalist\",{id:\"cities\",children:options.map(function(city){return/*#__PURE__*/_jsx(\"option\",{children:city.name+\", \"+city.country+\", \"+city.admin1+(city.admin3?\", \"+city.admin3:\"\")},city.id);})}),/*#__PURE__*/_jsx(\"input\",{className:\"citySearch\",name:\"citySearch\",placeholder:\"Deine Stadt\",onChange:onChange,value:input,list:\"cities\",onKeyDown:onKeyDown,type:\"text\"})]});};","map":{"version":3,"names":["React","useEffect","useState","LocationBar","setLocationInput","cities","setCurrentCoords","setCity","input","setInput","onChange","event","currentTarget","value","onKeyDown","key","results","inputArray","split","admin3","length","trim","city","find","changeCoords","lat","latitude","toString","lng","longitude","coords","console","log","name","replaceAll","options","Array","forEach","id","country","admin1","undefined","push","map"],"sources":["/home/bela/TPL/frontend-challenges/js/03_react/weather/src/components/location-bar.tsx"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport {cityInformation, locationResponse} from \"../utils/Hooks/useFetch\";\n\ninterface LocationBarProps {\n    setLocationInput: (city: string) => void;\n    cities: locationResponse | null;\n    setCurrentCoords: (coords: string[]) => void;\n    setCity: (city: string) => void;\n}\n\nexport const LocationBar: React.FC<LocationBarProps> = ({setLocationInput, cities, setCurrentCoords, setCity}) => {\n    const [input, setInput] = useState(\"\");\n    const onChange = (event: React.FormEvent<HTMLInputElement>) => {\n        setInput(event.currentTarget.value);\n    }\n\n    function onKeyDown(event: React.KeyboardEvent<HTMLInputElement>) {\n        if (event.key === \"Enter\" && cities?.results) {\n            const inputArray = input.split(\",\");\n            const admin3 = inputArray[inputArray.length - 1].trim();\n            let city = cities.results.find((city) => city.admin3 === admin3);\n            if (!city) city = cities.results[0];\n            changeCoords(city);\n        }\n    }\n\n    function changeCoords(city: cityInformation) {\n        const lat = city.latitude.toString();\n        const lng = city.longitude.toString();\n        const coords = [lat, lng]\n        console.log(coords, city.name, city.admin3);\n        setCurrentCoords(coords);\n        setCity(city.name)\n    }\n\n    useEffect(() => {\n        setLocationInput(input.replaceAll(\" \", \"%20\"));\n    }, [input, setLocationInput])\n\n\n    const options: cityOption[] = new Array<cityOption>();\n    cities?.results?.forEach((city) => {\n        const id = city.id;\n        const name = city.name;\n        const country = city.country;\n        const admin1 = city.admin1;\n        const admin3 = city.admin3 !== undefined ? city.admin3 : \"\";\n        options.push({\n            id, name, country, admin1, admin3\n        })\n    })\n    return (<>\n        <datalist id=\"cities\">\n            {options.map((city) => <option\n                key={city.id}>{city.name + \", \" + city.country + \", \" + city.admin1 + (city.admin3 ? \", \" + city.admin3 : \"\")}\n            </option>)}\n        </datalist>\n        <input className=\"citySearch\" name=\"citySearch\" placeholder=\"Deine Stadt\" onChange={onChange}\n               value={input} list=\"cities\" onKeyDown={onKeyDown} type=\"text\"/>\n    </>)\n}\n\ninterface cityOption {\n    id: number\n    name: string,\n    country: string,\n    admin1: string,\n    admin3: string | undefined\n}\n"],"mappings":"4IAAA,MAAOA,MAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,C,6IAUA,MAAO,IAAMC,YAAuC,CAAG,QAA1CA,YAA0C,MAA2D,wBAAzDC,iBAAyD,MAAzDA,gBAAyD,CAAvCC,MAAuC,MAAvCA,MAAuC,CAA/BC,gBAA+B,MAA/BA,gBAA+B,CAAbC,OAAa,MAAbA,OAAa,CAC9G,cAA0BL,QAAQ,CAAC,EAAD,CAAlC,wCAAOM,KAAP,eAAcC,QAAd,eACA,GAAMC,SAAQ,CAAG,QAAXA,SAAW,CAACC,KAAD,CAA8C,CAC3DF,QAAQ,CAACE,KAAK,CAACC,aAAN,CAAoBC,KAArB,CAAR,CACH,CAFD,CAIA,QAASC,UAAT,CAAmBH,KAAnB,CAAiE,CAC7D,GAAIA,KAAK,CAACI,GAAN,GAAc,OAAd,EAAyBV,MAAzB,SAAyBA,MAAzB,WAAyBA,MAAM,CAAEW,OAArC,CAA8C,CAC1C,GAAMC,WAAU,CAAGT,KAAK,CAACU,KAAN,CAAY,GAAZ,CAAnB,CACA,GAAMC,OAAM,CAAGF,UAAU,CAACA,UAAU,CAACG,MAAX,CAAoB,CAArB,CAAV,CAAkCC,IAAlC,EAAf,CACA,GAAIC,MAAI,CAAGjB,MAAM,CAACW,OAAP,CAAeO,IAAf,CAAoB,SAACD,IAAD,QAAUA,KAAI,CAACH,MAAL,GAAgBA,MAA1B,EAApB,CAAX,CACA,GAAI,CAACG,KAAL,CAAWA,KAAI,CAAGjB,MAAM,CAACW,OAAP,CAAe,CAAf,CAAP,CACXQ,YAAY,CAACF,KAAD,CAAZ,CACH,CACJ,CAED,QAASE,aAAT,CAAsBF,IAAtB,CAA6C,CACzC,GAAMG,IAAG,CAAGH,IAAI,CAACI,QAAL,CAAcC,QAAd,EAAZ,CACA,GAAMC,IAAG,CAAGN,IAAI,CAACO,SAAL,CAAeF,QAAf,EAAZ,CACA,GAAMG,OAAM,CAAG,CAACL,GAAD,CAAMG,GAAN,CAAf,CACAG,OAAO,CAACC,GAAR,CAAYF,MAAZ,CAAoBR,IAAI,CAACW,IAAzB,CAA+BX,IAAI,CAACH,MAApC,EACAb,gBAAgB,CAACwB,MAAD,CAAhB,CACAvB,OAAO,CAACe,IAAI,CAACW,IAAN,CAAP,CACH,CAEDhC,SAAS,CAAC,UAAM,CACZG,gBAAgB,CAACI,KAAK,CAAC0B,UAAN,CAAiB,GAAjB,CAAsB,KAAtB,CAAD,CAAhB,CACH,CAFQ,CAEN,CAAC1B,KAAD,CAAQJ,gBAAR,CAFM,CAAT,CAKA,GAAM+B,QAAqB,CAAG,GAAIC,MAAJ,EAA9B,CACA/B,MAAM,OAAN,EAAAA,MAAM,SAAN,yBAAAA,MAAM,CAAEW,OAAR,0DAAiBqB,OAAjB,CAAyB,SAACf,IAAD,CAAU,CAC/B,GAAMgB,GAAE,CAAGhB,IAAI,CAACgB,EAAhB,CACA,GAAML,KAAI,CAAGX,IAAI,CAACW,IAAlB,CACA,GAAMM,QAAO,CAAGjB,IAAI,CAACiB,OAArB,CACA,GAAMC,OAAM,CAAGlB,IAAI,CAACkB,MAApB,CACA,GAAMrB,OAAM,CAAGG,IAAI,CAACH,MAAL,GAAgBsB,SAAhB,CAA4BnB,IAAI,CAACH,MAAjC,CAA0C,EAAzD,CACAgB,OAAO,CAACO,IAAR,CAAa,CACTJ,EAAE,CAAFA,EADS,CACLL,IAAI,CAAJA,IADK,CACCM,OAAO,CAAPA,OADD,CACUC,MAAM,CAANA,MADV,CACkBrB,MAAM,CAANA,MADlB,CAAb,EAGH,CATD,EAUA,mBAAQ,wCACJ,iBAAU,EAAE,CAAC,QAAb,UACKgB,OAAO,CAACQ,GAAR,CAAY,SAACrB,IAAD,qBAAU,wBACJA,IAAI,CAACW,IAAL,CAAY,IAAZ,CAAmBX,IAAI,CAACiB,OAAxB,CAAkC,IAAlC,CAAyCjB,IAAI,CAACkB,MAA9C,EAAwDlB,IAAI,CAACH,MAAL,CAAc,KAAOG,IAAI,CAACH,MAA1B,CAAmC,EAA3F,CADI,EACdG,IAAI,CAACgB,EADS,CAAV,EAAZ,CADL,EADI,cAMJ,cAAO,SAAS,CAAC,YAAjB,CAA8B,IAAI,CAAC,YAAnC,CAAgD,WAAW,CAAC,aAA5D,CAA0E,QAAQ,CAAE5B,QAApF,CACO,KAAK,CAAEF,KADd,CACqB,IAAI,CAAC,QAD1B,CACmC,SAAS,CAAEM,SAD9C,CACyD,IAAI,CAAC,MAD9D,EANI,GAAR,CASH,CAlDM"},"metadata":{},"sourceType":"module"}